var tc = underi18n.MessageFactory({
    "scrum-backlog": "Все <a href=\"http://devprom.ru/glossary/%D0%98%D1%81%D1%82%D0%BE%D1%80%D0%B8%D1%8F-%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F\">пользовательские&nbsp;истории</a> попадают в бэклог и располагаются в нем в порядке приоритета их реализации.</p><p>&nbsp;</p><p>Крупные истории владелец продукта&nbsp;преобразует в эпики, которые затем декомпозирует&nbsp;на истории поменьше.</p><p>&nbsp;</p><p>Эпики позволяют отслеживать прогресс разработки&nbsp;продукта на верхних уровнях функциональной декомпозиции.",
    "scrum-planning": "В начале каждого спринта команда собирается на сессию планирования. Чтобы команда была сфокусирована на целях спринта, запишите их в описании спринта.</p><p>&nbsp;</p><p>Из бэклога выбираются самые приоритетные истории, уточняются требования, согласуются критерии приемки и фиксируются в тексте истории.</p><p>&nbsp;</p><p>Перенесите карточку&nbsp;в состояние \"Запланировано в спринт\" и декомпозируйте историю&nbsp;на задачи, например, проектирование, разработка, тестирование и т.д.</p><p>&nbsp;</p><p>В спринт можно включить столько историй, сколько позволяет его емкость, определяемая начальной скоростью команды и продолжительностью спринта.",
    "scrum-grooming": "Груминг позволяет подготовить истории к планированию и сформировать roadmap на несколько ближайших спринтов.</p><p>&nbsp;</p><p>В течение текущего спринта участники команды изучают новые приоритетные истории, стараются их оценить и задают уточняющие вопросы в комментариях.</p><p>&nbsp;</p><p>Команда оценивает историю в <a href=\"http://devprom.ru/news/Как-Story-Points-соотносятся-с-часами\" target=\"_blank\">Story Points</a> или&nbsp;идеальных часах (способ оценки задается в настройках методологии проекта).</p><p>&nbsp;</p><p>На очередной сессии планирования команда работает с уже понятными историями, за счет чего сессии становятся короче и менее изнурительны.",
    "scrum-taskboard": "Электронная доска задач в режиме реального времени показывает какие задачи находятся в работе или выполнены, кто из участников команды какими задачами занят.</p><p> </p><p>Участники команды берут себе свободные задачи, затем выполняют их отмечая эти действия простым перетаскиванием карточек между столбцами.</p><p> </p><p>В отличии от физической доски вам не нужно тратить время на запись и расшифровку текста задачи, карточки задач не окажутся случайно на полу, можно работать с распределенными командами и удаленными сотрудниками.</p><p> </p><p>Если ваша команда может собраться в одном месте, то на начальном этапе внедрения Scrum лучше работать с физической доской. В меню \"Действия\" выберите пункт \"Печать карточек\", чтобы затем их развесить на физической доске.",
    "scrum-burndown": "Для контроля за сроками спринта команда использует простой и наглядный инструмент - график Burndown.</p><p>&nbsp;</p><p>Красная линия показывает какой должен оставаться объем незавершенной работы на каждый день спринта.&nbsp;Зеленая линия указывает на фактический объем незавершенной работы.</p><p>&nbsp;</p><p>Команде нужно следить за тем, чтобы зеленая линия находилась под красной.",
    "scrum-velocity": "В течение проекта команда следит за графиком изменения ее скорости.</p><p>&nbsp;</p><p>Скорость команды постепенно должна увеличиваться за счет более качественной оценки историй и внедрения эффективных практик разработки ПО.",
    "scrum-retro": "После каждого спринта команда проводит ретроспективу.</p><p>&nbsp;</p><p>Ретроспектива - это действенный способ постепенно улучшать команду, процесс и качество продукта.&nbsp;На ретроспективах анализируются результаты предыдущих шагов,&nbsp;выявляются текущие проблемы и&nbsp;вырабатываются новые шаги по их решению.</p><p>&nbsp;</p><p>Результаты ретроспективы в форме записей и фотографий сохраняйте в базе знаний проекта для напоминания всем участникам о договоренностях, а также для анализа эффективности ваших действий по решению проблем.",
    "scrum-modelling": "В процессе реализации историй документируйте важные технические решения в форме фотографий, скриншотов,&nbsp;UML-диаграмм, формул, алгоритмов или в произвольной текстовой форме.</p><p>&nbsp;</p><p>Это позволит любому члену команды освежить в памяти детали технического решения, а новым членам команды быстрее войти в курс дела.&nbsp;Просто создайте требование,&nbsp;связанное с историей,&nbsp;и запишите в нем все важные технические решения.</p><p>&nbsp;</p><p>Требование удобно обсудить со всеми заинтересованными лицами.",
    "scrum-testing": "Разрабатывайте тестовую документацию по ходу реализации историй.&nbsp;Затем она будет использована для ручного тестирования, например, для смоук, регрессионного или исследовательского тестирования перед передачей продукта заказчику.</p><p>&nbsp;</p><p>Просто создайте тестовый сценарий, связанный с историей, и включите его в подходящий&nbsp;тест-план.&nbsp;Особенно востребованные тестовые&nbsp;сцеарии&nbsp;можно включить в несколько тест-планов.</p><p>&nbsp;</p><p>Выполняйте тестирование истории или тест-плана, отчет будет доступен&nbsp;всей команде. Если обнаружатся ошибки, то отклоняйте историю или добавляйте новые ошибки при тестировании тест-плана.</p><p>&nbsp;</p><p>Тестовые сценарии будут вязаны с исходными требованиями&nbsp;автоматически. Когда требование изменится приложение сообщит вам о том, что необходимо обновить и тестовую документацию.",
    "scrum-code": "Подключите репозиторий исходного кода&nbsp;к&nbsp;проекту, чтобы видеть все коммиты и собирать статистику по изменениям в исходном коде.&nbsp;Организуйте легковесное ревью кода.</p><p>&nbsp;</p><p>Связывайте задачи или истории с коммитами исходного кода, это позволит&nbsp;выяснить как именно была реализована история, а также упростит разработчикам изменение статуса задачи или списание времени."
});

var scrumTourTitle = 'Scrum';
var scrumTourId = 'ScrumTour';
var scrumTourTemplate = "<div class='popover tour' style='max-width:550px;'>"+
    "<div class='arrow'></div>"+
    "<h3 class='popover-title' style='color:#fff;background-color: #428bca;border: 2px solid #428bca;'></h3>"+
    "<div class='popover-content'></div>"+
    "<div class='popover-navigation text-center' style='padding: 9px 14px;'>"+
    "<button class='btn btn-default pull-left' data-role='prev'><span class='ui-button-text'><i class='icon-backward'></i></span></button>"+
    "<button class='btn btn-default' data-role='stop' title='"+ptt('end-tour')+"'><span class='ui-button-text'><i class='icon-stop'></i></span></button>"+
    "<button class='btn btn-default pull-right' data-role='next'><span class='ui-button-text'><i class='icon-forward'></i></span></button>"+
    "<div class='clearfix'></div>"+
    "</div>"+
    "</div>";

var scrumSteps = [
    {
        element: "table.table-inner tr:eq(2)",
        content: tc('scrum-backlog'),
        placement: 'bottom',
        path: '/pm/%project%/issues/list/productbacklog?report=productbacklog&basemodule=issues-backlog&&area=favs&tour='+scrumTourId,
        title: scrumTourTitle
    },
    {
        element: "tr.row-cards td:eq(1)",
        content: tc('scrum-grooming'),
        placement: 'bottom',
        path: '/pm/%project%/issues/board/iterationplanningboard?report=iterationplanningboard&basemodule=issues-board&tour='+scrumTourId,
        title: scrumTourTitle
    },
    {
        element: "tr.row-cards:eq(1) td:eq(1)",
        content: tc('scrum-planning'),
        placement: 'left',
        path: '/pm/%project%/issues/board?area=favs&tour='+scrumTourId,
        title: scrumTourTitle
    },
    {
        element: "table.board-table tr.row-cards:eq(1) td.board-column:eq(0)",
        content: tc('scrum-taskboard'),
        placement: 'right',
        path: '/pm/%project%/tasks/board/tasksboardforissues?report=tasksboardforissues&basemodule=tasks-board&area=favs&tour='+scrumTourId,
        title: scrumTourTitle
    },
    {
        orphan: true,
        content: tc('scrum-burndown'),
        placement: 'right',
        path: '/pm/%project%/tasks/chart/iterationburndown?report=iterationburndown&basemodule=tasks-chart&&area=favs&tour='+scrumTourId,
        title: scrumTourTitle
    },
    {
        orphan: true,
        content: tc('scrum-velocity'),
        placement: 'right',
        path: '/pm/%project%/module/scrum/velocitychart/velocitychart?report=velocitychart&basemodule=scrum/velocitychart&&area=favs&tour='+scrumTourId,
        title: scrumTourTitle
    },
    {
        element: "h4.title-cell",
        content: tc('scrum-retro'),
        placement: 'bottom',
        path: '/pm/%project%/knowledgebase/tree?area=favs&tour='+scrumTourId,
        title: scrumTourTitle
    }
];

if ( mode_reqs ) {
    scrumSteps.push(
        {
            element: "table.table-inner tr:eq(1)",
            content: tc('scrum-modelling'),
            placement: 'bottom',
            path: '/pm/%project%/module/requirements/docs?area=reqs&tour='+scrumTourId,
            title: scrumTourTitle
        }
    );
}
if ( mode_qa ) {
    scrumSteps.push(
        {
            element: "table.table-inner tr:eq(2)",
            content: tc('scrum-testing'),
            placement: 'bottom',
            path: '/pm/%project%/module/testing/results/testsofreleasereport?report=testsofreleasereport&basemodule=testing/results&&area=qa&tour='+scrumTourId,
            title: scrumTourTitle
        }
    );
}
if ( mode_code ) {
    scrumSteps.push(
        {
            element: "table.table-inner tr:eq(1)",
            content: tc('scrum-code'),
            placement: 'bottom',
            path: '/pm/%project%/module/sourcecontrol/revision?area=dev&tour='+scrumTourId,
            title: scrumTourTitle
        }
    );
}

scrumSteps.push(
    {
        orphan: true,
        duration: 1,
        path: '/pm/%project%/issues/board?area=favs&tour='+scrumTourId,
    }
);

if ( cookies.get(scrumTourId+'Skip') == null ) {
    toursQueue.unshift(new Tour({
        backdrop: true,
        backdropPadding: 20,
        steps: scrumSteps,
        name: scrumTourId,
        duration: 1000 * 120,
        template: scrumTourTemplate,
        onShow: function(tour) {
            $('.with-tooltip').popover('disable');
        },
        onEnd: function(tour) {
            $('.with-tooltip').popover('enable');
            startNextTour();
        },
        onShown: function(tour) {
            $('[data-role=stop]').click( function() {
                tour.end();
            });
        }
    }));
}