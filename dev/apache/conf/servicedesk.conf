<VirtualHost *:80>
	ServerName servicedesk.local

	HostnameLookups Off
	UseCanonicalName Off

	DocumentRoot "htdocs"
	Alias / ${DEV_ROOT}/../app/
	SetEnv DB_NAME devprom

	ErrorDocument 500 app/front.php
	ErrorDocument 404 /404
	
    	<Directory />
		AllowOverride None
    		Options FollowSymLinks
    		AuthType None
    		Require all granted
    		Order allow,deny
    		Allow from all

		RewriteEngine On

        	RewriteCond %{REQUEST_URI} !/cache.+$
	        RewriteCond %{REQUEST_URI} !/co/.+$
	        RewriteCond %{REQUEST_URI} !/img.+$
	        RewriteCond %{REQUEST_URI} !/images.+$
	        RewriteCond %{REQUEST_URI} !(^/favicon.*|^/404|^/310|^/500.*)$
	        RewriteCond %{REQUEST_URI} !/servicedesk\.php$
        	RewriteCond %{REQUEST_URI} !/app/front\.php$
	        RewriteRule ^.*$ /servicedesk/servicedesk.php [L,QSA]

        	RewriteRule ^cache/?$ /cache.php [QSA,L]
	        RewriteRule ^img/([^/]+)$ /images/$1
        	RewriteRule ^(404|500|500\.zip|310)$ /app/front.php [L,QSA]
    	</Directory>
</VirtualHost>